<!DOCTYPE html>
<html lang="en">
<head>
    
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>	
	<title>Cloudify - Cloud DevOps Orchestration</title>
	<script src="//cdn.optimizely.com/js/59503762.js"></script>
	
	<link rel="canonical" href="http://www.cloudifysource.org/posts/2013-11-01-cloud_devops_orchestration.html"/>	
	<!-- custom -->
	<!--<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/atom.xml" />-->
	<link rel="canonical" href="http://www.cloudifysource.org/index.html"/>	
	<link rel="shortcut icon" href="/ico/favicon.png" type="image/x-icon" />
	<!-- css -->
	<link href="/css/bootstrap.css" rel="stylesheet" />
	<link href="/css/bootstrap-responsive.css" rel="stylesheet" />
	<link href="/css/fancybox/jquery.fancybox.css" rel="stylesheet">
	<link href="/css/jcarousel.css" rel="stylesheet" />
	<link href="/css/flexslider.css" rel="stylesheet" />
	<link href="/css/cslider.css" rel="stylesheet" />
	<link href="/css/style.css" rel="stylesheet" />
	<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
	<!-- Theme skin -->
	<link id="t-colors" href="/skins/blue.css" rel="stylesheet" />
	<!-- boxed bg -->
	<link id="bodybg" href="/bodybg/bg1.css" rel="stylesheet" type="text/css" />
	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
		  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	<!-- Fav and touch icons -->
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png" />
	<link rel="shortcut icon" href="/ico/favicon.png" />
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
	<script src="/js/jquery.js"></script>
	<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
</head>

<body>
<div class="WrapperBg">    
    <div class="Wrapper">
        <!-- toggle top area -->
	<div class="hidden-top">
		<div class="hidden-top-inner container">
			<div class="row">
				<div class="span12">
					<ul>
						<li><strong><i class="icon-briefcase"></i>Go Pro! Find out about</strong><a class="black" href="goPro.html"> Enterprise Cloudify</a></li>
						</ul>
					</div>
			</div>
		</div>
	</div>
	
	<!-- end toggle top area -->
	<!-- start header -->
	<header class=" grayGrediant ">
	<div class="container ">
	
		<!-- hidden top area toggle link -->
		<div id="header-hidden-link">
			<a href="#" class="toggle-link" title="Go Pro with Enterprise Cloudify" data-target=".hidden-top">
			<i class="fa fa-plus"></i></a>
			<a class="toggle-link dwnBtn" href="/downloads/previous_ga_versions.html" data-toggle="tooltip" data-placement="bottom" title="Get the GA Release"><i class="fa-cloud-download"></i></a>
			<a class="toggle-link dwnBtn" href="/downloads/get_cloudify.html" data-toggle="tooltip" data-placement="bottom" title="Get the Latest Milestone Build">
				<i class="fa-download"></i></a>
			<div class="widget cdsearch">
			<form id="searchForm" class="form-search" action="#" method="get">
				<input placeholder="Search..." type="text" class="input-medium search-query ">
				<button id="goBtn" type="submit" class=" btn goBtn"><i class="iconsearch"></i></button>
			</form>
		</div>	
		</div>
		<!-- end toggle link -->
		
			
				
			
				
		
		
			
				<div class="logo navbar-toggle">
					<a href="index.html"><img src="/img/logo.png" alt="" class="logo" /></a>
				</div>
			
			  <nav class="navbar navbar-default" role="navigation">
                  <!-- Brand and toggle get grouped for better mobile display -->
                  <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                      <span class="sr-only">Toggle navigation</span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                    </button>
                    
                    
                  </div>		
					<!--<<div class="cdnavbar navbar  navbar-default" role="navigation">
							
								<div class="navigation navigation-bottom">
								nav>-->
									<!-- <ul class="nav topnav bold">-->
                    <div class="cdnavbar collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                    <ul class="nav navbar-nav">
                                        <li class="cloudifyLogo"><a href="index.html"><img src="/img/logoSmall.png" alt=""  /></a></li>
										<li class="dropdown active">
										<a href="https://cloudifysource.zendesk.com/forums" target="_blank">Support Forums</a>
										</li>
										<li class="dropdown">
										<a href="doc.html">Docs<i class="icon-angle-down"></i></a>
										<ul class="dropdown-menu bold" style="display: none;">
											<li><a href="#">2.3</a></li>
											<li><a href="#">2.5</a></li>
											<li><a href="/guide/2.6/qsg/qsg.html">2.6</a></li>
											<li><a href="#">2.7</a></li>
										</ul>
										</li>
										<li>
											<a href="/how/index.html">How it Works</a>
										</li>
										<li class="dropdown">
										<a href="#">Blog + Other Stuff <i class="icon-angle-down"></i></a>
										<ul class="dropdown-menu bold">
										<li><a href="blog-right-sidebar.html">Blog</a></li>
										<li><a href="#">The Cloudify Player</a></li>
										<li><a href="video.htm">Videos & Tutorials</a></li>
										<li><a href="participate.htm">Events</a></li>
										</ul>
										</li>
										
										<li>
											<a href="http://www.gigaspaces.com/cloudify" target="_blank"><strong>.Com</strong></a>
										</li>
										
									</ul>
				</div> 
        <!-- /.navbar-collapse -->
</nav>
</div>
		
</header>	
<!-- end header -->	
		
			<section id="inner-headline">
	<div class="container">
		<div class="row">
			<div class="span4">
				<div class="inner-heading">
					<h2><i class="icon-edit"></i>Cloudifysource<strong> Blogs</strong></h2>
				</div>
			</div>
			<div class="span8">
				<ul class="breadcrumb">
					<li><a href="#"><i class="icon-home"></i></a><i class="icon-angle-right"></i></li>
					<li><a href="#">Blog</a><i class="icon-angle-right"></i></li>
					<li class="active">Cloud DevOps Orchestration</li>
				</ul>
			</div>
		</div>
	</div>
	</section>
	
	<section id="content">
	<div class="container">
			<div class="row">
				<!-- Blog Right side posts -->
				<div class="span9">
					<div id="resultsDiv" class="DocumentsWrap"></div>
					<div id="pageContent" class="DocumentsWrapRight">
					
					<h1 class="pageTitle">Cloud DevOps Orchestration</h1>
					 
					  <span class="blogPostInfo">Posted By: <a href="#">Yaron Parasol</a>  on  ,   
					  </span>
					  <br/><br/><br/>
					 
                    <p>I&#8217;m pretty excited to take part in the OpenStack Summit in Hong Kong in a few days.<br />
Uri Cohen and I will give a talk about Cloud Application Orchestration.<br />
This is a great opportunity for us to share what we have learned during the last three years building Cloudify and engaging with many DevOps people, Cloudify community users and, of course, our enterprise and SaaS customers.<br />
Needless to say, we expect to meet many OpenStack users and contributors, get their valuable feedback and learn tons more as we always do at this kind of event.</p>
<p>When we started designing Cloudify, we didn&#8217;t spend so much time thinking about Orchestration; we followed what we figured out was the right way based on our experience with building a management layer for a distributed, virtualized grid middleware and applications. Coming from a monitoring background, it was natural for me to add in the <span class="caps">KPI</span> monitoring part. Scaling out was also natural for us, as this was our way to scale our In-Memory Data Grid.</p>
<p>Coming from an application perspective, we have started with a simple yet powerful model for setting up and managing cloud applications, called a recipe. The recipe assumed an application made of services. A service was basically a symmetric cluster of several machines with the same middleware and the same application code in it.</p>
<p>This recipe describes the dependencies between the services, and for each service it lists a set of hooks (we named them &#8220;lifecycle events&#8221;). These are hooks for installation, startup, post-installation configuration, shutdown and uninstall. Each service also declares the compute template Cloudify will use to provision VMs for this cluster. This way we ensure cloud portability.</p>
<p>Then, we added the startup and stop detectors which are availability probes to ensure components indeed start and remain up and healthy. Monitoring <span class="caps">KPI</span> definitions and scale rules were added to allow for custom performance monitoring and remediation measures.<br />
Finally, we started to recognize a need for some other post-deployment actions (Continuous Delivery for example), so we added additional hooks, called custom commands.</p>
<p>This model is simple, yet it has the profound understanding of a unified process that helps us drive our vision forward. Our assumption was quite different from what we saw as best practice adopted by others. Coming from an application perspective, we never drew a line between IaaS, Middleware and Application. For us, all of these are part of the application production fabric. They are all interdependent on one another in configurations, metadata and certainly in the flow of setting them up or fixing the application when it breaks or needs to change.</p>
<p>The common approach that I call the 3 layer cake assumes you lay each layer separately using different tools. So following the 3 layers approach, one would:</p>
<ol>
	<li>Use some script directly vs. the IaaS <span class="caps">API</span> or via some cloud library abstracting the IaaS <span class="caps">API</span> to provision VM, volumes etc.</li>
	<li>Use a CM tool like Chef, Puppet, Ansible or Salt to create the middle layer of the cake with the different middleware containers.</li>
	<li>Use <span class="caps">SSH</span>, CM agent or a combination to install the application binaries over the environment and configure the environment for the application.</li>
</ol>
<p>The 3 layer approach preserves the siloed structure of IT and Apps, so in essence it&#8217;s even anti- DevOps. In the worst case you have different teams running the different tools and in the better case you just have different tools.</p>
<p>This siloed IT structure is something that doesn&#8217;t fit the new reality of IT. IT organizations today are expected to be much more agile and deal with provisioning of applications in a matter of minutes, not hours, not days and certainly not weeks! Furthermore, they are expected to cater to growing number of users, but without ever growing the IT organization, all while keeping the overhead in a predictable and controlled level. <br />
So, if 10 years ago nobody even dreamed about this level of automation &#8211; today it&#8217;s not just a buzzword &#8211; it&#8217;s a requirement.</p>
<p>Think about the most simple web application deployment. Let&#8217;s use <span class="caps">LAMP</span> stack for this example. You will need the following steps:</p>
<ol>
	<li>Create a network to host the application.</li>
	<li>Create another network to be your <span class="caps">DMZ</span>.</li>
	<li>Set a security group with rules of networking between the application hosts.</li>
	<li>Create a floating IP to assign to your front-end host.</li>
	<li>Create a VM for the MySQL database server. This VM depends on the network and the security group.</li>
	<li>Create a VM for the application Apache (where <span class="caps">PHP</span> business logic is processed) &#8211; this VM is also dependent on the network and the security group.</li>
	<li>Create a VM in the <span class="caps">DMZ</span> network to host your front-end apache. This VM is also dependent on the floating IP (for more security it needs 2 vNICs).</li>
	<li>Install the MySQL DB on the backend VM.</li>
	<li>Install the application Apache on the other VM.</li>
	<li>Install the front end Apache on the <span class="caps">DMZ</span> VM.</li>
	<li>Create a DB for the application on the MySQL DB.</li>
	<li>Install the <span class="caps">PHP</span> stack on the application Apache.</li>
	<li>Install the application code onto the application Apache.</li>
	<li>Configure the apache modules for authentication and proxy on the <span class="caps">DMZ</span> Apache (in real life, you will probably need to configure or even install the <span class="caps">LDAP</span>). To configure the proxy module you need to discover the application Apache IP.</li>
	<li>Configure the <span class="caps">PHP</span> application to connect with the application DB (you need to discover the DB IP).</li>
	<li>Start the application.</li>
</ol>
<p><img src="/images/appnetwork.jpg" /></p>
<p>This simple example demonstrates how different layers are interdependent and how much a successful installation requires the correct timing and validation of the different steps.</p>
<p>Now just imagine what happens when one of your VMs crash or when you need to scale this application or upgrade its code. In all of these cases, all layers must be modified.</p>
<p>The need for orchestration grows linear with the complexity of your application (number of tiers, number of connections, security arrangements, etc.) and with the level of agility you want to achieve (more automated processes that are even more complex in monitoring success as you move).</p>
<p>So no wonder Amazon and later OpenStack added IaaS orchestration (<a href="http://aws.amazon.com/cloudformation/" class="newwindow">Cloud Formation</a> and <a href="https://wiki.openstack.org/wiki/Heat" class="newwindow">Heat</a>) to their set of services. Users wanted the cloud to provide them with IaaS orchestration (albeit somewhat rudimentary, defining a simple &#8220;wait for&#8221; type of orchestration) instead of the complicated scripts they had to write (think about scripting state and events).</p>
<p>The middleware and application layer are equally complex. There are parts of configuration that can only be done dynamically in a cloud environment &#8211; for example configuring middleware connections. CM tools don&#8217;t fit in here, as metadata sharing is not enough. You also need to time restarts in order to have the application components configured and started in the right order; this is something that CM tools were not built to do.</p>
<p>Bottom line &#8211; All the layers in the cake are interdependent. For example: many CM recipes will need to modify both the host OS, its etc/host file, an external volume and the load balancer to set up an application web server or database server.</p>
<p>Furthermore, setting up your application in the cloud is just one process out of several you need to automate. The next one in line is naturally auto-heal or you missed the whole point of agility. But let&#8217;s not forget continuous deployment, and other maintenance and upgrade procedures.</p>
<p>Learning these lessons, we rolled up our sleeves again and got back to our design board to find a better orchestration model.</p>
<p><a href="http://openstacksummitnovember2013.sched.org/event/f72c2b2d69d0d5925d03e8b7dc4b20dd#.UmV7aflebnh" class="newwindow">Come hear us speak at the OpenStack Summit</a> in Hong Kong and read more about our model in my next post. Stay tuned!</p>


                    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'cloudifysource'; // required: replace example with your forum shortname
    var disqus_identifier = '/posts/2013-11-01-cloud_devops_orchestration.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

					
					
					</div>			
				</div>	
				
				<!-- Blog Left side coll -->
				<div class="span3">
					<aside class="right-sidebar">
						<!--Event groups-->



<div class="leftContentBox blogLeft-topTitle">
	<h3>Recent Posts</h3>
</div>


<div class="leftContentBox blogLeftBox"> 
 		
</div>

               <!--start -->
                 <div class="leftContentBox blogLeft-topTitle blog-left-title2 tumblr">
                        <h3>CloudifySource on Tumblr</h3>
                 </div>   
                <div class="leftContentBox tumblrFeed">                     
                
                </div>
<!--end-->


<div class="leftContentBox blogLeft-topTitle">
	<h3>Archived Posts</h3>
</div>

 <ul class="blog-archive-list">
 
 




 
 </ul>
					</aside>
				</div>
			</div>	
	</div>	
	</section>	
	<div class="clear"></div>
	<!--Start Footer -->
		<footer>
	<div class="container">
		<div class="row">
			<div class="span3">
				<div class="widget">
					<h5 class="widgetheading">Browse pages</h5>
					<ul class="link-list">
						<li><a href="about.html">About Us</a></li>
						<li><a href="goPro.html">Enterprise Cloudify</a></li>
						<li><a href="cloudifyrecipecatalog.html">Cloudify Test Drive</a></li>
						<li><a href="how.html">How it Works</a></li>
						<li><a href="#">Get in touch with us</a></li>
					</ul>
				</div>
			</div>
			<div class="span3">
				<div class="widget">
					<h5 class="widgetheading">Important stuff</h5>
					<ul class="link-list">
						<li><a href="#">Press & Coverage</a></li>
						<li><a href="http://www.cloudifysource.org/terms_of_use">Terms of Use</a></li>
						<li><a href="http://www.cloudifysource.org/privacy_policy">Privacy policy</a></li>
						<li><a href="#">Github Repo</a></li>
						<li><a href="https://cloudifysource.zendesk.com/home" target="_blank">Support forums</a></li>
					</ul>
				</div>
			</div>
			<div class="span3">
				<!--<div class="widget">
					<h5 class="widgetheading">Flickr photostream</h5>
					<div class="flickr_badge">
						<script type="text/javascript" src="http://www.flickr.com/badge_code_v2.gne?count=8&amp;display=random&amp;size=s&amp;layout=x&amp;source=user&amp;user=34178660@N03"></script>
					</div>
					<div class="clear">
					</div>
				</div>-->
			</div>
			<div class="span3">
				<div class="widget">
					<h5 class="widgetheading">Get in touch with us</h5>
					<strong>Where to get support</strong><br>
					 	<p>
						<i class="icon-comments-alt"></i><a href="https://cloudifysource.zendesk.com/home" target="_blank"> Support forums</a><br>
						<i class="icon-envelope-alt"></i> info@cloudifysource.org<br>
						<i class="fa fa-stack-overflow"></i><a href="http://stackoverflow.com/questions/tagged/cloudify"target="_blank"> Stack Overflow</a><br>
						<i class="icon-user"></i><a href="https://cloudifysource.zendesk.com/login?return_to=https%3A//cloudifysource.zendesk.com/home" target="_blank">Login</a> / <a href="https://cloudifysource.zendesk.com/registration" target="_blank">Register</a>

					</p>
				</div>
			</div>
		</div>
	</div>
	<div id="sub-footer">
		<div class="container">
			<div class="row">
				<div class="span6">
					<div class="copyright">
						<p>
							<span>&copy; Flattern 2013 All right reserved. Designed by</span><a href="http://iweb-studio.com" target="_blank">iweb-studio</a>
						</p>
					</div>
				</div>
				<div class="span6">
					<ul class="social-network">
						<li><a href="https://www.facebook.com/GigaSpaces?sk=app_201742856511228" data-placement="bottom" title="Facebook"><i class="icon-facebook icon-square"></i></a></li>
						<li><a href="https://twitter.com/intent/follow?screen_name=cloudifysource" data-placement="bottom" title="Twitter"><i class="icon-twitter icon-square"></i></a></li>
						<li><a href="http://www.tumblr.com/follow/cloudifysource" data-placement="bottom" title="Tumblr"><i class="fa-tumblr icon-square"></i></a></li>
						<li><a href="http://www.youtube.com/cloudifysource" data-placement="bottom" title="YouTube"><i class="fa-youtube icon-square"></i></a></li>						
					</ul>
				</div>
			</div>
		</div>
	</div>
	<div class="clear"></div>
	</footer>




			
	</div>
</body>
</html>
