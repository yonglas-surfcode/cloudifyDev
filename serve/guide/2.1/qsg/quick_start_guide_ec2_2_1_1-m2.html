<!DOCTYPE html>
<html lang="en">


<head>
    
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>	
	<title>Cloudify - 10-Minute EC2 Quick Start Guide ( 2.1.1 M2 )</title>
	<script src="//cdn.optimizely.com/js/59503762.js"></script>
	
	<link rel="canonical" href="http://www.cloudifysource.org/guide/2.1/qsg/quick_start_guide_ec2_2_1_1-m2.html"/>	
	<!-- custom -->
	<!--<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/atom.xml" />-->
	<link rel="canonical" href="http://www.cloudifysource.org/index.html"/>	
	<link rel="shortcut icon" href="/ico/favicon.png" type="image/x-icon" />
	<!-- css -->
	<link href="/css/bootstrap.css" rel="stylesheet" />
	<link href="/css/bootstrap-responsive.css" rel="stylesheet" />
	<link href="/css/fancybox/jquery.fancybox.css" rel="stylesheet">
	<link href="/css/jcarousel.css" rel="stylesheet" />
	<link href="/css/flexslider.css" rel="stylesheet" />
	<link href="/css/cslider.css" rel="stylesheet" />
	<link href="/css/style.css" rel="stylesheet" />
	<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
	<!-- Theme skin -->
	<link id="t-colors" href="/skins/blue.css" rel="stylesheet" />
	<!-- boxed bg -->
	<link id="bodybg" href="/bodybg/bg1.css" rel="stylesheet" type="text/css" />
	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
		  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	<!-- Fav and touch icons -->
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png" />
	<link rel="shortcut icon" href="/ico/favicon.png" />
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
	<script src="/js/jquery.js"></script>
	<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
</head>

<body>
<div id="wrapper">
	<!-- start header -->
	<!-- toggle top area -->
	<div class="hidden-top">
		<div class="hidden-top-inner container">
			<div class="row">
				<div class="span12">
					<ul>
						<li><strong><i class="icon-briefcase"></i>Go Pro! Find out about</strong><a class="black" href="/goPro"> Enterprise Cloudify</a></li>
						</ul>
					</div>
			</div>
		</div>
	</div>
	
	<!-- end toggle top area -->
	<!-- start header -->
	<header class=" grayGrediant ">
	<div class="container ">
	
		<!-- hidden top area toggle link -->
		<div id="header-hidden-link">
			<a href="#" class="toggle-link" title="Go Pro with Enterprise Cloudify" data-target=".hidden-top">
			<i class="fa fa-plus"></i></a>
			<a class="toggle-link dwnBtn" href="/downloads/early_access" data-toggle="tooltip" data-placement="bottom" title="Get the Latest Milestone Build"><i class="fa-cloud-download"></i></a>
			<a class="toggle-link dwnBtn" href="/downloads/get_cloudify" data-toggle="tooltip" data-placement="bottom" title="Get Cloudify">
				<i class="fa-download"></i></a>
			<div class="widget cdsearch">
			<form id="searchForm" class="form-search" action="#" method="get">
				<input placeholder="Search..." type="text" class="input-medium search-query ">
				<button id="goBtn" type="submit" class=" btn goBtn"><i class="iconsearch"></i></button>
			</form>
		</div>	
		</div>
		<!-- end toggle link -->
		
			
				
			
				
		
		
			
				<div class="logo navbar-toggle">
					<a href="/index"><img src="/img/logo.png" alt="" class="logo" /></a>
				</div>
			
			  <nav class="navbar navbar-default" role="navigation">
                  <!-- Brand and toggle get grouped for better mobile display -->
                  <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                      <span class="sr-only">Toggle navigation</span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                    </button>
                    
                    
                  </div>		
					<!--<<div class="cdnavbar navbar  navbar-default" role="navigation">
							
								<div class="navigation navigation-bottom">
								nav>-->
									<!-- <ul class="nav topnav bold">-->
                    <div class="cdnavbar collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                    <ul class="nav navbar-nav">
                                        <li class="cloudifyLogo"><a href="/index"><img src="/img/logoSmall.png" alt=""  /></a></li>
										<li class="dropdown">
										<a href="https://cloudifysource.zendesk.com/forums" target="_blank">Support Forums <i class="icon-angle-down"></i></a>
										</li>
										<li class="dropdown">
										<a href="/guide/2.6/qsg/qsg">Docs <i class="icon-angle-down"></i></a>
										<ul class="dropdown-menu bold" style="display: none;">
											<li><a href="/guide/2.3/qsg/quick_start_guide">2.3</a></li>
											<li><a href="/guide/2.5/qsg/quick_start_guide">2.5</a></li>
											<li><a href="/guide/2.6/qsg/qsg">2.6</a></li>
											<li><a href="/guide/2.7/qsg/qsg">2.7</a></li>
										</ul>
										</li>
										<li>
											<a href="/how/index.html">How it Works <i class="icon-angle-down"></i></a>
										</li>
										<li class="dropdown">
										<a href="#">Blog + Other Stuff <i class="icon-angle-down"></i></a>
										<ul class="dropdown-menu bold">
										<li><a href="/blog">Blog</a></li>
										<li><a href="cloudifyRecipeCatalog.html">The Cloudify Player</a></li>
										<li><a href="CloudifysourceTV.html">Videos & Tutorials</a></li>
										<li><a href="participate.htm">Events</a></li>
										</ul>
										</li>
										
										<li>
											<a href="http://www.gigaspaces.com/cloudify" target="_blank"><strong>.Com<i class="icon-angle-down"></i></strong></a>
										</li>
										
									</ul>
				</div> 
        <!-- /.navbar-collapse -->
</nav>
</div>
		
</header>	
<!-- end header -->	
	<!-- end header -->
	<section id="inner-headline">
	<div class="container">
		<div class="row">
			<div class="span8">
				<div class="inner-heading">
					<h2><strong>10-Minute EC2 Quick Start Guide ( 2.1.1 M2 )</strong></h2>
				</div>
			</div>
			<div class="span4">
				<ul class="breadcrumb">
					<li><a href="#"><i class="icon-home"></i></a><i class="icon-angle-right"></i></li>
					<li><a href="#">Docs</a><i class="icon-angle-right"></i></li>
					<li><a href="#">2.6</a><i class="icon-angle-right"></i></li>
					<li class="active">10-Minute EC2 Quick Start Guide ( 2.1.1 M2 )</li>
				</ul>
			</div>
		</div>
	<div>
	</section>
	<section id="content">
	<div class="container ">
		<div class="row">
			<div class="span3">
				<aside class="left-sidebar">
								
								
									<div class="leftContentBox">

   <h5 class="widgetheading" id="todHdr">Cloudify 2.1</h2>
   <div class="clear"></div>
   <div id="sidebar" class="list-group docMenu"> 
			
		<!--<h5 class="widgetheading">Getting Started</h5>-->
		 <a href="#Getting_Started" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Getting Started</a>
		<div id="Getting_Started" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/qsg/quick_start_guide">Getting Started with Cloudify</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/qsg/quick_start_guide_ec2">Getting Started with Cloudify on EC2</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Product Overview</h5>-->
		 <a href="#Product_Overview" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Product Overview</a>
		<div id="Product_Overview" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/overview/cloudify_intro">Cloudify - Open PaaS Stack | A Quick Introduction</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Release Notes</h5>-->
		 <a href="#Release_Notes" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Release Notes</a>
		<div id="Release_Notes" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/release_notes/release_notes">Release Notes</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Installation & Setup</h5>-->
		 <a href="#Installation_&_Setup" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Installation & Setup</a>
		<div id="Installation_&_Setup" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/setup/cloudify_prerequisites">Cloudify Shell Prerequisites</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/setup/installing_the_cloudify_client">Installing the Cloudify Shell</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/setup/post_installation_configuration">Post-Installation Configuration</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/setup/configuring_azure">Configuring Azure</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/setup/configuring_ec2">Configuring EC2</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/setup/configuring_openstack">Configuring HP OpenStack Cloud</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/setup/configuring_rsopenstack">Configuring RackSpace</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/setup/configuring_byon">Configuring a Traditional Data Center [BYON]</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Bootstrapping</h5>-->
		 <a href="#Bootstrapping" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Bootstrapping</a>
		<div id="Bootstrapping" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/bootstrapping/bootstrapping_process">The Bootstrapping Process</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/bootstrapping/bootstrapping_localcloud">Bootstrapping a Local Cloud</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/bootstrapping/bootstrapping_azure">Bootstrapping Azure</a>							   
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/bootstrapping/bootstrapping_ec2">Bootstrapping EC2</a>							   
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/bootstrapping/bootstrapping_hp">Bootstrapping HP OpenStack Cloud</a>							   
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/bootstrapping/bootstrapping_rsopenstack">Bootstrapping RackSpace</a>							   
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/bootstrapping/bootstrapping_byon">Bootstrapping a Traditional Data Center [BYON]</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Developing Recipes</h5>-->
		 <a href="#Developing_Recipes" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Developing Recipes</a>
		<div id="Developing_Recipes" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/recipes_overview">Anatomy of a Recipe</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/application_recipe">The Application Recipe</a>							   
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/service_recipe">The Service Recipe</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/lifecycle_events">Lifecycle Events</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/recipe_parameters">Recipe Parameterization</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/extending_recipes">Extending Service Recipes</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/the_service_context_api">The Service Context API</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/attributes_api">The Attributes API</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/custom_commands">Custom Commands</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/plugins">Probes</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/configuring_ui_section">Configuring the Web Management Console</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/sla_requirements">SLA Requirements</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/developing/scaling_rules">Scaling Rules</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Common Patterns</h5>-->
		 <a href="#Common_Patterns" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Common Patterns</a>
		<div id="Common_Patterns" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Deploying Services & Applications</h5>-->
		 <a href="#Deploying_Services_&_Applications" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Deploying Services & Applications</a>
		<div id="Deploying_Services_&_Applications" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/deploying/deploying_apps">Deploying Applications</a>							   
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/deploying/deploying_azure">Deploying on Azure</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Monitoring Your Applications</h5>-->
		 <a href="#Monitoring_Your_Applications" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Monitoring Your Applications</a>
		<div id="Monitoring_Your_Applications" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/monitoring/the_web_management_console">Monitoring using the Web Management Console</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/monitoring/monitoring_app_post_deploy">Monitoring using the Cloudify Shell</a>							   
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Developing Cloud Drivers</h5>-->
		 <a href="#Developing_Cloud_Drivers" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Developing Cloud Drivers</a>
		<div id="Developing_Cloud_Drivers" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/clouddrivers/cloud_driver">The Cloud Driver</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/clouddrivers/developing_custom_clouddriver">Developing Custom Cloud Drivers</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/clouddrivers/tutorial_maven">Tutorial - Developing a custom cloud driver using Maven</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Plugins and Probes</h5>-->
		 <a href="#Plugins_and_Probes" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Plugins and Probes</a>
		<div id="Plugins_and_Probes" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/plugins_and_probes/probes">Using Scripted Probes</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/plugins_and_probes/develop_your_plugin">Using Plugin probes</a>							   
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Integration</h5>-->
		 <a href="#Integration" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Integration</a>
		<div id="Integration" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/integrations/cloudify_chef_lifecycle_event_handlers">Cloudify-Chef Lifecycle Event Handlers</a>							   
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/integrations/chef_tutorial">Cloudify Tutorial</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">REST API</h5>-->
		 <a href="#REST_API" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>REST API</a>
		<div id="REST_API" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">Reference</h5>-->
		 <a href="#Reference" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Reference</a>
		<div id="Reference" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/recipe/app_recipe_ref">Application Descriptor Reference</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/recipe/service_recipe_ref">Service Descriptor Reference</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/recipe/command_line_reference">Command Line Reference</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
				  <a   class="list-group-item" href="/guide/2.1/api">Cloudify API Reference</a></li>				 
				  <a   class="list-group-item" href="/guide/2.1/restapi/restdoclet.html">Rest API Reference</a>			 
             			  
		</div>
       		
		<!--<h5 class="widgetheading">Contributing</h5>-->
		 <a href="#Contributing" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>Contributing</a>
		<div id="Contributing" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/contribute/how_to">Contributing to the Cloudify Open Source Project</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
		<!--<h5 class="widgetheading">FAQ</h5>-->
		 <a href="#FAQ" class="list-group-item"  data-parent="#sidebar"><i class="icon-caret-right"></i>FAQ</a>
		<div id="FAQ" class="list-group subitem collapse" class="list-group-item"> 				 			
			  				  
				  		
					<a  class="list-group-item" href="/guide/2.1/faq/faq">Frequently Asked Questions</a>							   
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  				  
				  			  
			  
			  			  
		</div>
       		
</div>
</div>



															
		
				</aside>
			</div>


	<div class="span9">
		<h1>Introduction</h1>
<p>The goal of this quick start guide is to familiarize you with Cloudify in a few simple steps. For this purpose, we will use the PetClinic application (an example application that is included in the Cloudify distribution file) to demonstrate the steps required to deploy an application on an Amazon EC2 cloud. For a quick start guide to using Cloudify on a local cloud, see <a href="../qsg/quick_start_guide">10-Minute Quick Start Guide</a>.</p>
<p>This guide teaches you how to:</p>
<ul>
	<li><a href="#step1">Install the Cloudify Shell</a></li>
	<li><a href="#step2">Bootstrap on EC2</a></li>
	<li><a href="#step3">Understand the Recipe</a></li>
	<li><a href="#step4">Deploy the Recipe</a></li>
	<li><a href="#step5">Monitor the Application</a></li>
	<li><a href="#step6">Scale the Application</a></li>
	<li><a href="#step7">Uninstall the Application</a></li>
	<li><a href="#step8">Teardown the Cloud</a></li>
</ul>
<h2>About the Pet Clinic Application</h2>
<p>The PetClinic application presented in this guide is a port of the <a href="http://static.springsource.org/docs/petclinic.html">Spring PetClinic</a> application to <a href="http://grails.org/">Grails</a> and MongoDB, and uses the Grails <span class="caps">GORM</span> bindings to MongoDB. The users of the application are employees of the clinic who, in the course of their work, need to view and manage information regarding veterinarians, the clients, and their pets.</p>
<p>The application&#8217;s environment is based on the following 2-tier architecture:</p>
<table>
	<tr>
		<th>Tier </th>
		<th>Service </th>
	</tr>
	<tr>
		<td> Web and Business Logic Tier </td>
		<td> A Grails platform deployed on Apache Tomcat server </td>
	</tr>
	<tr>
		<td> Database Tier </td>
		<td> A <a href="http://www.mongodb.org/display/DOCS/Sharding+Introduction" title="Sharded MongoDB">sharded MongoDB server cluster</a> comprised of the following components:<br />
<ul><li><strong><a href="http://www.mongodb.org/display/DOCS/Configuring+Sharding#ConfiguringSharding-ConfigServers" title="MongoDB Configuration Server">Configuration Server</a></strong>: Stores the cluster&#8217;s metadata including basic information on each shard server and the chunks contained therein.</li><br />
<li><strong>Routing Processes (mongos)</strong>: A routing and coordination process that mediates between client requests and the actual <code>mongod</code> instances.  When receiving client requests, the <code>mongos</code> process routes the request to the appropriate <code>mongod</code> instance(s) and merges any results sent back to the client.</li><br />
<li><strong>Mongod instances (<span class="caps">AKA</span> shards)</strong>: In our example, there are two instances of <code>mongod</code> used for storing the application&#8217;s data.</li></ul> </td>
	</tr>
</table>
<h4 class="info">The number of service instances can be easily configured by modifying the numInstances attribute in the relevant Cloudify recipe file (e.g. <code>&lt;service-name&gt;-service.groovy</code>).</h4>
<h4 class="warn">When you install MongoDB on Windows 7, you must run MongoDB with administrative credentials. For more information, see the &#8220;Installing Windows 7&#8221; section of the <a href="http://www.mongodb.org/display/DOCS/Windows+Service">Windows Service</a> page.</h4>
<h1 id="step1">Step 1 &#8211; Install the Cloudify shell</h1>
<p>This step describes how to install the Cloudify shell on your local machine.</p>
<h2>Prerequisites</h2>
<p>Before you install the Cloudify shell, make sure that your environment meets all the minimum requirements. For more information, see <a href="../setup/cloudify_prerequisites">Cloudify Prerequisites</a>.</p>
<h2>To install the Cloudify shell</h2>
<ol>
	<li>Install <code>Java</code> on your machine.</li>
	<li><a href="http://bit.ly/ztbg9u" title="Click here to download the Cloudify zip file">Download</a> and unzip the Cloudify distribution file.</li>
	<li>Go to the <code>&lt;cloudify installation folder&gt;/bin</code> folder, and then run <code>cloudify.bat</code> (Windows) or <code>cloudify.sh</code> (Linux) depending on the operating system running on your machine.<br />
  <img src="../../images/setup/shell_start2.jpg" width="630" height="300" /></li>
</ol>
<h1 id="step2">Step 2 &#8211; Bootstrap on EC2</h1>
<p>This step describes how to bootstrap Cloudify on EC2.</p>
<h2>Prerequisites</h2>
<p>Before you use the Cloudify shell to bootstrap on EC2, make sure that you perform the following tasks:</p>
<ol>
	<li>Create an Amazon Web Services account.</li>
	<li>Create an EC2 private key file (.pem) and save it under <code>&lt;cloudify root&gt;/tools/cli/plugins/esc/ec2/upload</code>. You can create and download an EC2 private key file, as follows:
	<ol>
		<li>Browse to your EC2 management console, expand <strong>Network &amp; Security</strong>, click <strong>Key Pairs</strong>, and then click <strong>Create Key Pair</strong>.<br />
<img src="../../images/ec2/EC2_CREATE_KEY_PAIRS_RAW3.jpg" /></li>
		<li>Specify the <strong>Key Pair Name</strong>, and then click <strong>Create</strong>.<br />
<h4 class="info">Make a note of the name as this information will be required for configuring the Cloudify cloud driver. For this example, we will use <strong>myKeyPair-name</strong> that creates the corresponding <strong>myKeyPair-name.pem</strong> key pair file.</h4><br />
<img src="../../images/ec2/EC2_CREATE_KEY_PAIRS_1_RAW3.jpg" /></li>
		<li>When the download dialog box opens, click <strong>OK</strong> to save the EC2 key pair file.<br />
<h4 class="info">Make sure the file is saved under <code>&lt;cloudify root&gt;/tools/cli/plugins/esc/ec2/upload</code>.</h4><br />
<img src="../../images/ec2/EC2_CREATE_KEY_PAIR_SUCCESS_AND_SAVE3.jpg" /><br />
<h4 class="info">The private key enables Cloudify cloud driver to create <span class="caps">SSH</span> connections to newly created instances on EC2.</h4></li>
	</ol></li>
	<li>Configure the Cloudify EC2 cloud driver <code>&lt;cloudify root&gt;/tools/cli/plugins/esc/ec2/ec2-cloud.groovy</code>. To configure the EC2 cloud driver, edit the file and modify the following attribute values:
	<ul>
		<li>In the <code>user</code> section:
		<ul>
			<li><code>user</code>&#8212;Type your EC2 <strong>Access Key ID</strong>.<br />
To obtain your active <strong>Access Key ID</strong>, browse to your <span class="caps">AWS</span> management console, click <strong>Security Credentials</strong>, click <strong><a href="https://aws-portal.amazon.com/gp/aws/developer/account/index.html?action=access-key" class="newwindow" title="Link to the AWS management console&#39;s Access Credentials tab">Access Keys</a></strong>, and then click the <strong>Access Credentials</strong> tab.<br />
<img src="../../images/ec2/EC2_ACCESS_KEY_AND_SECRET_KEY3.jpg" /></li>
			<li><code>apiKey</code>&#8212;Type your EC2 <strong>Secret Access Key</strong>.<br />
To obtain your <strong>Secret Access Key</strong>, browse to your <span class="caps">AWS</span> management console, click <strong>Security Credentials</strong>, click <strong><a href="https://aws-portal.amazon.com/gp/aws/developer/account/index.html?action=access-key" class="newwindow" title="Link to the AWS management console&#39;s Access Credentials tab">Access Keys</a></strong>, click the <strong>Access Credentials</strong> tab, and then click <strong>Show</strong>.<br />
<h4 class="info">The Secret Access Key must correspond to the specified Access Key ID.</h4></li>
			<li><code>keyFile</code>&#8212;Type the name of the previously created key pair file (in our example, <strong>myKeyPair-name.pem</strong>).</li>
		</ul></li>
		<li>In the <code>templates</code> section, under <code>options</code>:
		<ul>
			<li><code>keyPair</code>&#8212;Type the <strong>Key Pair Name</strong> used when creating the key pair file (in our example, <strong>myKeyPair-name</strong>).</li>
		</ul></li>
	</ul></li>
</ol>
<h4 class="info">For a more information about how to configure the EC2 cloud driver, see <a href="../bootstrapping/bootstrapping_ec2">Bootstrapping Cloudify on EC2</a>.</h4>
<h2>To bootstrap Cloudify on EC2</h2>
<p>To bootstrap on EC2, at the Cloudify shell prompt, type: <strong>bootstrap-cloud</strong> <code>ec2</code></p>
<p>The installation progress is displayed for the following Cloudify components as the local cloud is bootstrapping:</p>
<ul>
	<li><strong>The Cloudify agent</strong>&#8212;The component that runs on all Cloudify managed VMs that is responsible starting application services, gathering monitoring metrics, and monitoring their availability.</li>
	<li><strong>The management service</strong>&#8212;The &#8220;brains&#8221; of Cloudify that is responsible for provisioning VMs, triggering the deployment process, and aggregating the metrics collected by each Cloudify agent.</li>
	<li><strong>The <span class="caps">REST</span> gateway service</strong>&#8212;The service that exposes a RESTful interface to the services provided by the management service.</li>
	<li><strong>The Web management console service</strong>&#8212;The service that provides a Web-based <span class="caps">GUI</span> to the Cloudify environment and allows you to easily monitor your applications.</li>
</ul>
<h4 class="info">To obtain a list of all the available commands, type <code>&lt;tab&gt;</code>, or to view help for a specific command, type <code>[cmd] --help</code>. Note that the Cloudify shell automatically connects to the <span class="caps">REST</span> service such that you do not have to run the <strong>connect</strong> command separately. For more information about Cloudify commands, see <a href="../recipe/command_line_reference">Command Line Reference</a>.</h4>
<p><img src="../../images/setup/bootstrapp_ec2_1.jpg" width="714" height="495" /></p>
<p>Your EC2 cloud is now ready for deploying the PetClinic application.<br />
For more information about Bootstrapping on EC2, see <a href="../bootstrapping/bootstrapping_ec2">Bootstrapping Cloudify on EC2</a>.</p>
<h1 id="step3">Step 3 &#8211; Understand the Recipe</h1>
<p>Before deploying the application, you must configure the recipe that will be used for the deployment. In this example, we have already configured this for you; Therefore, recipe can be used as-is without any further configuration and you can proceed to the next step. However, we recommend you read this step to gain an understanding of the recipe, and optionally configure the number of service instances used by the services defined in the recipe.</p>
<p>Recipes are the execution plans for installing, starting, orchestrating, and monitoring your application stack without changing the application code or architecture. The deployment files and folders are located in the application&#8217;s recipe folder, in our example <code>&lt;cloudify root&gt;/recipes/apps/petclinic</code>. The following is a list of the application recipe&#8217;s files and folders that are used to deploy the PetClinic application:</p>
<ul>
	<li>The application descriptor file: <code>petclinic-mongo-application.groovy</code></li>
	<li>The Configuration Server (mongoConfig) recipe folder</li>
	<li>The Shards (mongod) recipe folder</li>
	<li>The Routing Processes (mongos) recipe folder</li>
	<li>The Tomcat recipe folder</li>
</ul>
<p>The files required to run the specified services can be found in their corresponding folders. A &#8220;service&#8221; in this context is an application tier &#8211; e.g. web container, database, etc.</p>
<p>The following diagram depicts the application&#8217;s recipe file and folder structure.</p>
<p><img src="../../images/setup/pet_clinic_anatomy3_211m2.JPG" /></p>
<p>For more information about recipes, see <a href="../developing/recipes_overview">Anatomy of a Recipe</a></p>
<h2>The Application Recipe</h2>
<p>Every recipe must have an application descriptor file that describes the services it requires and their interdependencies. As a rule of thumb, each unique set of processes that function as one tier, should be regarded as a service, e.g. a tomcat cluster, or a set of MySql primary and backup servers.</p>
<h4 class="info">It is important to distinguish between a service and a service instance. A service can be defined as a cluster which is composed of at least one service instance. Every service instance resides on one host (typically this would be a VM), whereas a service is the aggregation of all service instances and as such can span multiple machines.</h4>
<p>A typical application is composed of multiple tiers, such as a web tier and a database tier. Each tier can contain one or more service instances, e.g. two Tomcat service instances and one MySQL service instance. In Cloudify terminology, we refer to this scenario as having two services; the first having two service instances and the second having one service instance.</p>
<p>In our example, the PetClinic application has 4 services:</p>
<ul>
	<li>Tomcat  (We called this service: <code>tomcat</code>)</li>
	<li>MongoDB Configuration Server (We called this service: <code>mongoConfig</code>)</li>
	<li>MongoDB Sharding Server (We called this service: <code>mongos</code>)</li>
	<li>MongoDB Data Shards (We called this service: <code>mongod</code>)</li>
</ul>
<p>The following shows the corresponding application descriptor file for the PetClinic application.</p>
<script src="https://gist.github.com/1943898.js?file=petclinic_app_recipe.groovy"></script><p>From the application descriptor file, we can learn the following information:</p>
<ul>
	<li>The names of the services required to run the application.</li>
	<li>The <code>mongos</code> service depends on the <code>mongoConfig</code> and <code>mongod</code> services; hence the <code>mongos</code> service will not start until these services have successfully started.</li>
	<li>The <code>tomcat</code> service depends on the <code>mongod</code> service; hence the <code>tomcat</code> service will not start until the <code>mongod</code> service has successfully started.</li>
</ul>
<h3>The Service Level Recipe</h3>
<p>Every service has its own mandatory service recipe based on a <a href="../developing/recipes_overview">recipe structure</a> that is common to all of them.</p>
<p>Each service folder contains all the information required by the service. The following is a list of the service recipe&#8217;s files and folders:</p>
<ul>
	<li>A service descriptor file (<code>&lt;service name&gt;-service.groovy</code>) that consists of some or all the following sections:
	<ol>
		<li><strong>A prolog section</strong>&#8212;This section describes the service name, type, number of required instances, and the icon to display for this service in the <a href="../monitoring/the_web_management_console">Cloudify web management console</a>.</li>
		<li><strong>A lifecycle section</strong>&#8212;This is the most important section of the service descriptor file, which describes how to handle the service lifecycle events such as installation, startup, shut down, and uninstall. Each event is allocated a handler, which can be an external Groovy script, a shell script, or a batch file (depending on the operating system). The handlers must reside in the service folder.<br />
<h4 class="info">Cloudify can use the same recipe for different operating systems, as long as you specify the relevant instructions for each within the recipe, or the instructions are generic to all of them. The use of handler files is optional. For example, if a post-installation script is not specified in the service recipe, then Cloudify does not execute a handler after the service has been installed.</h4></li>
	</ol></li>
	<li><strong>A compute section</strong>&#8212;This section specifies the template name to use when provisioning VMs.<br />
    The template name corresponds to a template name specified in the cloud driver, that defines a pool of machines that can be used when provisioning VMs. In this context, it refers to the hardware profiles available to provision VMs for service instances. A hardware profile maps to a specific hardware setup and image size (e.g. in Amazon EC2 it would map to the combination of the <strong>hardware id</strong> [<code>m1.small</code>, <code>c1.medium</code>, etc.] and an <strong>ami id</strong>). This allows for clear separation between the application recipe and the cloud environment on which it runs. For more information, see <a href="../clouddrivers/cloud_driver">Cloud Drivers</a>.</li>
	<li><strong>A custom commands section</strong>&#8212;This sections defines custom commands that you can be invoked via the Cloudify shell.</li>
	<li><strong>A plugins section</strong>&#8212;This section defined plugins that Cloudify can use to perform the following tasks:
	<ul>
		<li>Verify that a service has started correctly&#8212;For example, the plugin might probe the service for its runtime details, request and expect a specific response from a specified <span class="caps">URL</span>, check a specified port, etc.</li>
		<li>Get service-specific monitoring metrics&#8212;For example, the number of active Tomcat sessions if you&#8217;re running a Tomcat service, or the number of active MySQL connections if you&#8217;re running MySQL. This can be achieved using various probing strategies such as <span class="caps">JMX</span>, <span class="caps">JDBC</span>, <span class="caps">CLI</span>, or even a custom implementation created by the recipe developer. The services are probed for metric data every 5 seconds.</li>
	</ul></li>
	<li><strong>A UI configuration section</strong>&#8212;This section defines how the Cloudify web management console displays the monitored metrics.</li>
	<li>An optional service properties file (<code>&lt;service name&gt;.properties</code>) which contains configurable parameters that can be used by the recipe.</li>
	<li>All the specified lifecycle script files, e.g. <code>&lt;service name&gt;_install.groovy, &lt;service name&gt;_start.groovy</code>, etc.<br />
For example, the <code>&lt;service name&amp;&gt;_install.groovy</code> script will typically run during the installation of the service, if it&#8217;s specified in the lifecycle section of the service file.<br />
<h4 class="info">You can specify any preferred name for lifecycle handlers, as long as you specify their exact names in the corresponding service file.</h4></li>
	<li>An optional folder called <code>usmlib</code> which must contain all the jar files of your custom plugins.<br />
Cloudify is distributed with <a href="../plugins_and_probes/develop_your_plugin">built-in plugins</a> that you can configure as required. However, you can also develop your own monitoring plugins and add them to the recipe in this folder. For example, in the PetClinic application we used our Cloudify Mongo Plugin <a href="http://www.gigaspaces.com/wiki/download/attachments/55935974/CloudifyMongoPlugins_sources2_0.zip">cloudify-mongo-plugin.jar</a> to retrieve details from the <code>mongod</code> service, and to detect port liveness.</li>
</ul>
<p>For more information, see <a href="../developing/service_recipe">The Service Recipe</a>.</p>
<h3>The Lifecycle Scripts</h3>
<p>If you view any of the Groovy scripts in the tomcat recipe folder, and you will notice that they are essentially regular groovy scripts in which you can write any Groovy or Java code. The only difference is use of the Cloudify <span class="caps">API</span> (<a href="../developing/the_service_context_api">ServiceContext <span class="caps">API</span></a>). This <span class="caps">API</span> exposes the service runtime details to the script, so that a service can locate and use the details of another service within the same application. For example, in our PetClinic application we use the <span class="caps">API</span> to expose the port of the <code>mongod</code> service instance to the all the other services in the PetClinic application.</p>
<p>For more information, see <a href="../developing/lifecycle_events">Lifecycle Events</a>.</p>
<h3>Getting the Service Binaries</h3>
<p>The service binaries, in our example the Tomcat and MongoDB distributions, can be quite large to upload to machines being provisioned for a service instance. Therefore, when provisioning machines the recipes fetch the binaries from a specified file repository (this can be any http, ftp or file system location) and are not uploaded with the recipe, thus improving the performance and responsiveness of the Cloudify environment. The binaries are fetched using Groovy&#8217;s built in support for <a href="http://ant.apache.org">Apache Ant</a> called <a href="http://groovy.codehaus.org/api/groovy/util/AntBuilder.html">AntBuilder</a> and the Ant <code>get</code> task.</p>
<h3>The Mongo Config Server (mongoConfig) Service Recipe</h3>
<p>The Mongo Config Server (mongoConfig) Server recipe does the following:</p>
<ul>
	<li>Calculates its port based on its instance ID and properties file, and then notifies the serviceContext <span class="caps">API</span> so that other services can communicate with it</li>
	<li>Downloads, unzips, and installs the Mongo binaries on the VM</li>
	<li>Starts the Configuration Server process</li>
	<li>Detects whether the server started successfully by using the MongoLivenessDetector plugin</li>
	<li>Collects metrics (Active Read Clients, Active Write Client, etc.) for displaying in the Cloudify web management console</li>
</ul>
<p>The mongo-config service file is <code>&lt;cloudify root&gt;/recipes/apps/petclinic/mongoConfig/mongoConfig-service.groovy</code>.</p>
<h3>The Mongo Sharding Server (mongos) Recipe</h3>
<p>The Mongo Router (mongos) recipe does the following:</p>
<ul>
	<li>Calculates its port based on its instance ID and properties file, and then notifies the serviceContext <span class="caps">API</span> so that other services can communicate with it</li>
	<li>Downloads, unzips, and installs the Mongo binaries on the VM</li>
	<li>Starts the Router Server process</li>
	<li>Detects whether the server started successfully by using the MongoLivenessDetector plugin</li>
	<li>Uses the serviceContext <span class="caps">API</span> to detect the host address and port for the mongoConfig and the mongod services, and configures sharding accordingly.</li>
	<li>Collects metrics (Active Read Clients, Active Write Client, etc.) for displaying in the Cloudify web management console</li>
</ul>
<p>The mongos service file is <code>&lt;cloudify root&gt;/recipes/apps/petclinic/mongos/mongos-service.groovy</code>.</p>
<h3>The Mongo Data Shards (mongod) Recipe</h3>
<p>The Mongo Data Shards (mongod) Recipe does the following:</p>
<ul>
	<li>Calculates its port based on its instance ID and properties file, and then notifies the serviceContext <span class="caps">API</span> so that other services can communicate with it</li>
	<li>Downloads, unzips, and installs the Mongo binaries on the VM</li>
	<li>Starts the MongoDB Server process</li>
	<li>Detects whether the server started successfully by using the MongoLivenessDetector plugin</li>
	<li>Collects metrics (Active Read Clients, Active Write Client, etc.) for displaying in the Cloudify web management console</li>
</ul>
<p>The <code>mongod</code> service file is <code>&lt;cloudify root&gt;/recipes/apps/petclinic/mongod/mongod-service.groovy</code>.</p>
<h3>The Tomcat Recipe</h3>
<p>The Tomcat Recipe does the following:</p>
<ul>
	<li>Downloads, unzips, and installs the Tomcat binaries on the VM</li>
	<li>Configures the Tomcat <span class="caps">HTTP</span> Port and then enables remote <span class="caps">JMX</span></li>
	<li>Starts the Tomcat process (using the bin/catalina script)</li>
	<li>Detects whether the server started successfully by using the PortLivnessDetector plugin to check port 8080</li>
	<li>Monitors Tomcat performance by using the <span class="caps">JMX</span> Monitoring plugin</li>
</ul>
<p>The tomcat service file is <code>&lt;cloudify root&gt;/recipes/apps/petclinic/tomcat/tomcat-service.groovy</code>.</p>
<h3>Configuring <code>tomcat</code> with the <code>mongod</code> port</h3>
<p>In this example, we use our ServiceContext <span class="caps">API</span> and its k/v store mechanism, to share the <code>mongod</code> service instance (host address and port) details with the <code>tomcat</code> service instance.</p>
<p>Firstly, the Mongo Data Shards recipe exposes the details of the <code>mongod</code> service instance, as follows:</p>
<script src="https://gist.github.com/1698917.js?file=exposeMongosService.groovy"></script>
<p>Then the Tomcat recipe (<code>&lt;cloudify root&gt;/recipes/apps/petclinic/tomcat/tomcat_start.groovy</code>) retrieves the data, as follows:</p>
<script src="https://gist.github.com/1698923.js?file=retrieveMongosServie.groovy"></script><p>Once this is completed, the <code>tomcat</code> service instance knows the host address and port of the <code>mongod</code> service instance, and can communicate with it.</p>
<h1 id="step4">Step 4 &#8211; Deploy the Recipe</h1>
<p>Now that you are more familiar with the recipe mechanism, let&#8217;s deploy the application. At the Cloudify shell prompt, type: <strong>install-application</strong> <code>-timeout 50 &lt;cloudify root&gt;/recipes/apps/petclinic</code></p>
<h4 class="warn">Currently the Cloudify shell does not support backslashes so you must use a forward slash (<code>/</code>) as your path separator even if you are running on Windows.</h4>
<p>In this example, we specified a timeout of 50 minutes (<code>-timeout 50</code>) to allow sufficient time for the recipe to download the service binaries (Tomcat and MongoDB distributions) from the web and install the application. Optionally, you may add the <code>--verbose</code> switch to display additional information during the installation process.</p>
<h4 class="info">If an error occurs during installation, an error message is displayed and the installation is aborted. The error message will help you identify at which phase the problem occurred and for which service it.</h4>
<p>Once the application installation has successfully completed, you can access the PetClinic application by browsing to <a href="http://YOUR_APPLICATION_IP_ON_EC2:8080/petclinic-mongo">http://YOUR_APPLICATION_IP_ON_EC2:8080/petclinic-mongo</a>.</p>
<p>To test the application, try adding a few owners and pets, and then search for them to make sure that the application is functioning correctly.</p>
<h1 id="step5">Step 5 &#8211; Monitor the Application</h1>
<p>To monitor the application,  open a web browser (supported browsers include the latest versions of Firefox or Chrome, but not Internet Explorer which it is not fully supported at this time), and then browse to the <a href="../monitoring/the_web_management_console">Web Management Console</a>. Once the page is loaded, simply login anonymously without specifying a username or password.</p>
<h4 class="info">You can find the exact <span class="caps">URL</span> displayed in the Cloudify shell when bootstrapping the local cloud. The default <span class="caps">URL</span> is <a href="http://WEB_UI_SERVICE:8099">http://WEB_UI_SERVICE:8099</a>.</h4>
<p>Test the Cloudify web management console as follows:</p>
<ul>
	<li>Click the <strong>Topology</strong> link, and then click on the Topology tab.</li>
	<li>Use the <strong>Select Application</strong> combo box to navigate to the PetClinic application. You should see an application map that corresponds to the PetClinic application recipe.</li>
	<li>Each service has a real-time status and shows the number of actual service instances. Click one of the services in the application map.</li>
</ul>
<p>In the lower pane, you can navigate between several views:</p>
<ul>
	<li><strong>Metrics view</strong>&#8212;Displays the service metrics configured in the UI configuration section of the recipe</li>
	<li><strong>Infrastructure view</strong>&#8212;Lists the virtual hosts on which your application services are deployed.</li>
	<li><strong>Services view</strong>&#8212;Displays the individual service instances and correlates their various metrics.</li>
</ul>
<p><img src="../../images/setup/petClinic_in_webui_screenShot2.jpg" width="630" height="300"/></p>
<h1 id="step6">Step 6 &#8211; Scale the Application</h1>
<p>Cloudify supports two methods for scaling a service:</p>
<ol>
	<li><a href="#ms1">Manual Scaling</a></li>
	<li><a href="#sr1">Automatic Scaling</a></li>
</ol>
<h2 id="ms1">Manual Scaling</h2>
<p>Cloudify also enables you to set the number of service instances manually.<br />
If you want to set the number of service instances manually, type the following command in the Cloudify Shell: <strong>set-instances service-name number-of-required-instances</strong>.</p>
<h4 class="info">In order to enable manual scaling, you must set the <strong>elastic</strong> attribute to true in the service file.</h4>
<p>In the following example, Cloudify adjusts the number of tomcat service instances to three.<br />
If the tomcat service has <strong>two</strong> instances prior to invoking the following command, it <strong>increases</strong> the number of tomcat service instances to three and if the tomcat service has <strong>five</strong> instances prior to invoking the following command, it <strong>decreases</strong> the number of tomcat service instances to three.</p>
<p><strong>set-instances tomcat 3</strong></p>
<h2 id="sr1">Automatic Scaling (Scaling Rules)</h2>
<p>Cloudify enables each service to define one scaling rule for deciding if the service needs to scale out or scale in. For example, Cloudify can decide based on the average number of busy threads, to increase the number of tomcat service instances or to decrease it.</p>
<p>Here&#8217;s a snippet of a tomcat service file : <br />
<script src="https://gist.github.com/2580529.js?file=mini_tomcat_auto_scaling.groovy"></script></p>
<p>If you want to read more about Scaling rules, click <a href="../developing/scaling_rules">here</a>.</p>
<h1 id="step7">Step 7 &#8211; Uninstall the Application</h1>
<p>To uninstall the application, at the Cloudify shell prompt, type: <strong>uninstall-application</strong> <code>petclinic</code></p>
<h1 id="step8">Step 8 &#8211; Teardown the Cloud</h1>
<p>To shut down your cloud installation, at the Cloudify shell prompt, type: <strong>teardown-cloud</strong> <code>ec2</code></p>
<h1>What&#8217;s Next?</h1>
<ul>
	<li>Learn more about <a href="../developing/recipes_overview">recipe development</a>.</li>
	<li>Learn more about cloud portability and <a href="../clouddrivers/cloud_driver">cloud drivers</a>.</li>
	<li>Learn how to <a href="../plugins_and_probes/develop_your_plugin">develop a monitoring plugin</a>.</li>
	<li>Learn more about monitoring your application with the <a href="../monitoring/the_web_management_console">Cloudify Web Management Console</a>.<br />
<!-- 
In order to appear in the versions combo, this file should be renamed to quick_start_guide_ec2-2_1_1-m2.textile
version 2.1.1-m2 --></li>
</ul>
		</div>
	</div>
</div>
	</section>
	<!-- start footer-->
		<footer>
	<div class="container">
		<div class="row">
			<div class="span3">
				<div class="widget">
					<h5 class="widgetheading">Browse pages</h5>
					<ul class="link-list">
						<li><a href="\about_us">About Us</a></li>
						<li><a href="\goPro">Enterprise Cloudify</a></li>
						<li><a href="\cloudifyRecipeCatalog.html">Cloudify Test Drive</a></li>
						<li><a href="\how">How it Works</a></li>
						<li><a href="#">Get in touch with us</a></li>
					</ul>
				</div>
			</div>
			<div class="span3">
				<div class="widget">
					<h5 class="widgetheading">Important stuff</h5>
					<ul class="link-list">
						<li><a href="#">Press & Coverage</a></li>
						<li><a href="/terms_of_use">Terms of Use</a></li>
						<li><a href="/privacy_policy">Privacy policy</a></li>
						<li><a href="#">Github Repo</a></li>
						<li><a href="https://cloudifysource.zendesk.com/home" target="_blank">Support forums</a></li>
					</ul>
				</div>
			</div>
			<div class="span3">
				<!--<div class="widget">
					<h5 class="widgetheading">Flickr photostream</h5>
					<div class="flickr_badge">
						<script type="text/javascript" src="http://www.flickr.com/badge_code_v2.gne?count=8&amp;display=random&amp;size=s&amp;layout=x&amp;source=user&amp;user=34178660@N03"></script>
					</div>
					<div class="clear">
					</div>
				</div>-->
			</div>
			<div class="span3">
				<div class="widget">
					<h5 class="widgetheading">Get in touch with us</h5>
					<strong>Where to get support</strong><br>
					 	<p>
						<i class="icon-comments-alt"></i><a href="https://cloudifysource.zendesk.com/home" target="_blank"> Support forums</a><br>
						<i class="icon-envelope-alt"></i> info@cloudifysource.org<br>
						<i class="fa fa-stack-overflow"></i><a href="http://stackoverflow.com/questions/tagged/cloudify"target="_blank"> Stack Overflow</a><br>
						<i class="icon-user"></i><a href="https://cloudifysource.zendesk.com/login?return_to=https%3A//cloudifysource.zendesk.com/home" target="_blank">Login</a> / <a href="https://cloudifysource.zendesk.com/registration" target="_blank">Register</a>

					</p>
				</div>
			</div>
		</div>
	</div>
	<div id="sub-footer">
		<div class="container">
			<div class="row">
				<div class="span6">
					<div class="copyright">
						<p>
							<span>&copy; Flattern 2013 All right reserved. Designed by</span><a href="http://iweb-studio.com" target="_blank">iweb-studio</a>
						</p>
					</div>
				</div>
				<div class="span6">
					<ul class="social-network">
						<li><a href="https://www.facebook.com/GigaSpaces?sk=app_201742856511228" data-placement="bottom" title="Facebook" target="_blank"><i class="icon-facebook icon-square"></i></a></li>
						<li><a href="https://twitter.com/intent/follow?screen_name=cloudifysource" data-placement="bottom" title="Twitter" target="_blank"><i class="icon-twitter icon-square"></i></a></li>
						<li><a href="http://www.tumblr.com/follow/cloudifysource" data-placement="bottom" title="Tumblr" target="_blank"><i class="fa-tumblr icon-square"></i></a></li>
						<li><a href="http://www.youtube.com/cloudifysource" data-placement="bottom" title="YouTube" target="_blank"><i class="fa-youtube icon-square"></i></a></li>						
					</ul>
				</div>
			</div>
		</div>
	</div>
	<div class="clear"></div>
	</footer>




	<!-- end footer-->

</div>
<a href="#" class="scrollup"><i class="icon-chevron-up icon-square icon-32 active"></i></a>

<!-- javascript footer_scripts-->
<!-- javascript footer_scripts
    ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="/js/jquery.easing.1.3.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/jcarousel/jquery.jcarousel.min.js"></script>
<script src="/js/jquery.fancybox.pack.js"></script>
<script src="/js/jquery.fancybox-media.js"></script>
<script src="/js/google-code-prettify/prettify.js"></script>
<script src="/js/portfolio/jquery.quicksand.js"></script>
<script src="/js/portfolio/setting.js"></script>
<script src="/js/tweet/jquery.tweet.js"></script>
<script src="/js/jquery.flexslider.js"></script>
<script src="/js/jquery.nivo.slider.js"></script>
<script src="/js/modernizr.custom.79639.js"></script>
<script src="/js/jquery.ba-cond.min.js"></script>
<script src="/js/jquery.slitslider.js"></script>
<script src="/js/jquery.cslider.js"></script>
<script src="/js/animate.js"></script>
<script src="/js/custom.js"></script>
<script src="/js/jquery.simplePagination.js"></script>
<script src="/js/jquery.validate.min.js"></script>
<!-- custom -->
<script type="text/javascript" src="/scripts/search.js"></script>
<script type="text/javascript" src="/scripts/version.data.js"></script>
<script type="text/javascript" src="/scripts/version.js"></script>
<script type="text/javascript" language="javascript">llactid=12206</script>
<script type="text/javascript" language="javascript" src="http://t6.trackalyzer.com/trackalyze.js"></script> 
<script>
	$(function() {
		$('#da-slider').cslider();
		
		//for highlight current pages
		//http://docs.shopify.com/support/configuration/store-customization/how-do-i-style-active-link-with-javascript-and-css
		$('.nav li').each(function() {
			var href = $(this).find('a').attr('href');
			if (href === window.location.pathname) {
				$(this).addClass('active');
			}
		});
		
		//highlight  docs menu links
		$('a.list-group-item').each(function() {
			if ($(this).attr('href')  ===  window.location.pathname) {
				$(this).addClass('highlight');
				$(this).parent().addClass("collapse");
				$(this).parent().addClass("in");
				var pathArray = window.location.pathname.split( '/' );
				pathArray = pathArray[2];
				
				//highlight top menu when user click on docs menu links
				$('.nav li').each(function() {
					var href = $(this).find('a').attr('href');
					var splitHref = href.split( '/' );
					splitHref=splitHref[2];
					if (splitHref === pathArray) {
						$(this).addClass('active');
						$(this).parent().parent().addClass('active');
					}
				});
				
				
			}
		});
	});
</script>



<!-- includes -->
<script type="text/javascript">

   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-31930048-1']);
   _gaq.push(['_trackPageview']);

   (function() {
	   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();

</script>
<script type="text/javascript">
 var _gauges = _gauges || [];
(function() {
		var t   = document.createElement('script');
		t.type  = 'text/javascript';
		t.async = true;
		t.id    = 'gauges-tracker';
		t.setAttribute('data-site-id', '4fd5058b613f5d712200004f');
		t.src = '//secure.gaug.es/track.js';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(t, s);
})();
</script> 

<script type="text/javascript">
<!-- start Mixpanel -->
(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);
b._i.push([a,e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);
mixpanel.init("96365f48f34c41c7b91e045b4f48d53d");
<!-- end Mixpanel -->




//mixpanel global page tracking:
//mixpanel.track_forms('#ki_form', 'Qualaroo');
mixpanel.track('Cloudify Community Page Views', {'page name' : document.title, 'url' : window.location.pathname});  
$(function(){ 
    // This sends us an event every time a user clicks the button
	$("a.hp-btn-getCloudify").click(function() {
	    mixpanel.track("Get Cloudify Button Clicks",{'page name' : document.title, 'url' : window.location.pathname}); 
	});
	
	$("a.getCloudifyBtn").click(function() {
	    mixpanel.track("Home Page Download Button Clicks",{'page name' : document.title, 'url' : window.location.pathname}); 
	    mixpanel.track("Get Cloudify Button Clicks",{'page name' : document.title, 'url' : window.location.pathname}); 
	});	//Try It Now Click
	$("a.hp-tryItNow").click(function() {
	    mixpanel.track("Try it Now HP Button Clicks",{'page name' : document.title, 'url' : window.location.pathname}); 
	});
});


mixpanel.track_forms("#searchForm", "Search",{'page name' : document.title, 'url' :  window.location.pathname});
$(function(){ 
	$("#goBtn").click(function() {
		
	var value = $('#search').val();
	    mixpanel.track("Search",{"keyword": value}); 

	});
});

//track Cloudify Early Access Builds
//mixpanel.track_links("a.eaTitle", "Product Download - Early Access Builds", {'referrer': document.referrer });


// mixpanel- trakc only if email requested
var currEmail="";
$("body").live('change', function(){
 $("#ki_form").live('change', function(){
  if($("#ki_question_99437").length != 0) {
	currEmail =  $("input.ki_explain_small").val();	
	mixpanel.track_links("#ki_submit_button", "Qualaroo", function(ele) {
	 if($('input').hasClass('ki_explain_small')){
	  var currEmail =  $("input.ki_explain_small").val();	
	  mixpanel.name_tag(currEmail);
	  mixpanel.people.identify(currEmail);
	  mixpanel.people.set({
	  $email: currEmail,
	  $first_name: currEmail,
	  $created: new Date(),
	  $last_seen:new Date(),
	  });
	} return { type: $(ele).attr('type'),email: currEmail}
	});
  }
});

});

//
//$("#ki_submit_button").click(function() {

//if($('input').hasClass('ki_explain_small')){
 // var currEmail =  $("input.ki_explain_small").val();	
 // mixpanel.name_tag(currEmail);
 // mixpanel.people.identify(currEmail);
 // mixpanel.people.set({
 // $email: currEmail,
 // $first_name: currEmail,
//  });
//}
//});
</script>
	
<script type="text/javascript">var _kiq = _kiq || [];</script>
<script type="text/javascript" src="//s3.amazonaws.com/ki.js/42111/87X.js" async="true"></script>
	
<script src="/js/cookie.js"></script>
<script type="text/javascript">
$(function() {
$('#sidebar > a').on('click', function (e) {
		e.preventDefault();

		if(!$(this).hasClass("active")){
			var lastActive = $(this).closest("#sidebar").children(".active");
			lastActive.removeClass("active");
			lastActive.next('div').collapse('hide');
			$(this).addClass("active");
			$(this).next('div').collapse('show');

		}else{
			//$(this).removeClass("active");
			$(this).closest("#sidebar").children(".in").css("height","0px");
			$(this).closest("#sidebar").children(".in").removeClass("in");
			$(this).removeClass("active");
		
		}

	});
	
	
	
		$("div.expand").hide();
			$("span.inlineToggleExpandBtn").append("<span class='arrow arrowsDown'>&raquo;</span>").click(function(){
				$(this).children('span.arrow').toggleClass('arrowsDown').toggleClass('arrowsUp');
				$(this).parent().next("div.expand").slideToggle(500);
			});
			$("span.expandBtn,span.inlineExpandBtn").append("<span class='arrow arrowsDown'>&raquo;</span>").click(function(){
				var elem = $(this),
					divExpand = elem.children("div.expand"),
					divExpandIframe = divExpand.children("iframe");
				
				elem.children('span.arrow').toggleClass('arrowsDown').toggleClass('arrowsUp');
				if (divExpand.length==0) {
					divExpand = $("<div class='expand'><span id='expandLoading'>Loading content ...</span></div>").hide().appendTo(elem);
					divExpand.width(725).height(480).css("border", "none");
				}
				if (divExpandIframe.length==0) {
					divExpandIframe = $("<iframe src='" + elem.attr("title") + "' />").css("opacity", 0).appendTo(divExpand);
					divExpandIframe.width(725).height(480).css({"overflow-x":"hidden", "overflow-y":"auto", "border":"0"});
					
					var getContent = function(){
							divExpandIframe.contents().find("html").css("background", "none");
							divExpandIframe.contents().find("head").append('<link rel="stylesheet" href="/css/template.css" type="text/css"/>');
							divExpandIframe.contents().find("head").append('<link rel="stylesheet" href="/css/jquery-ui-1.8.17.custom.css" type="text/css" media="all"/>');
							divExpandIframe.contents().find("head").append('<link rel="stylesheet" type="text/css" href="/scripts/prettify/prettify.css">');
							divExpandIframe.contents().find("body").css("background","none");
							
							var data = divExpandIframe.contents().find("#pageContent");

							divExpandIframe.contents().find("body").html(data);
							divExpandIframe.contents().find("#versionSelectionBottom").remove();
							
							divExpandIframe.contents().find("img").each(function(){
								var maxWidth = 707;
								
								if ($(this).width() > (maxWidth - $(this).offset().left)) {
									$(this).width(maxWidth - $(this).offset().left);
								}
							});
							
							$("#expandLoading").remove();
							divExpandIframe.animate({"opacity":1}, 'slow');
						};
					
					if ($.browser.webkit) {
						var load = function(callback) {
							(divExpandIframe.contents().find("#pageContent").html()) ? callback() : setTimeout(function() {load(callback);}, 500);
						};
						load(getContent);
					}
					else
						divExpandIframe.load(getContent);
				}
				divExpand.slideToggle(500);
			});
			
		
		$("li.expandBtn").click(function(){	
			$(this).next("div.expand").slideToggle(500);
			if($(this).html()=="More..."){
				$(this).html("Less...");	
			}else{
				$(this).html("More...");
			}
		});

	
});
</script>

<!-- javascript footer_scripts-->


</body>
</html>